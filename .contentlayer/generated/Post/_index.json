[
  {
    "title": "Simplifying Your Content Management with Next.js and Contentlayer",
    "description": "",
    "keywords": "Next.js 13, Contentlayer",
    "date": "February 17, 2023",
    "body": {
      "raw": "\nContentlayer turns your content into data. And It makes it so easy to work with `.md` and `.mdx` files. You just install contentlayer and do some configuration and you are done. you can start writing in your md/mdx files and everything works. contentlayer adds types to your data automatically, so your data is always type-safe.\n\n## Create a Next.js app\n\nWe are going to use the new `appDir` in this setup. `--experimental-app` this flag will create a Next.js app with an `appDir`. Everything in this app directory is a server component by default. when your Next app is created clean it up, and remove all the unnecessary code.\n\n```bash\nnpx create-next-app@latest --experimental-app\n# or\nyarn create next-app --experimental-app\n# or\npnpm create next-app --experimental-app\n```\n\n## Install Contentlayer\n\nNow we need to install contentlayer and next.js plugin.\n\n```bash\nnpm install contentlayer next-contentlayer\n#or\nyarn add contentlayer next-contentlayer\n#or\npnpm add contentlayer next-contentlayer\n```\n\n### Configuration for Contentlayer\n\nTo integrate contentlayer into `next dev` and `next build` process we need to wrap `nextConfig` with `withContentlayer` method.\n\n```js\n// next.config.js\n\nconst { withContentlayer } = require('next-contentlayer');\n\n/** @type {import('next').NextConfig} */\nconst nextConfig = {\n  experimental: {\n    appDir: true,\n  },\n};\n\nmodule.exports = withContentlayer(nextConfig);\n```\n\nThen we need to make some changes in our `tsconfig.json` or `jsconfig.json` file.\n\n```ts\n{\n  \"compilerOptions\": {\n    \"baseUrl\": \".\",\n    \"paths\": {\n      \"contentlayer/generated\": [\"./.contentlayer/generated\"]\n    }\n  },\n  \"include\": [\"next-env.d.ts\", \"**/*.tsx\", \"**/*.ts\", \".contentlayer/generated\"]\n}\n```\n\n### Defining Post schema\n\nNow that we have everything installed, we can begin defining our document schema. This will help contentlayer convert our content to data, which we can later use in our blog. Create a new file in root of your project called `contentlayer.config.js` and place the following content in it.\n\n```js\n// contentlayer.config.js\n\nimport { defineDocumentType, makeSource } from 'contentlayer/source-files';\n\nconst Post = defineDocumentType(() => ({\n  name: 'Post',\n  filePathPattern: `**/*.md`,\n  fields: {\n    title: {\n      type: 'string',\n      required: true,\n    },\n    description: {\n      type: 'string',\n      required: true,\n    },\n    date: {\n      type: 'string',\n      required: true,\n    },\n  },\n  computedFields: {\n    url: {\n      type: 'string',\n      resolve: (doc) => doc._raw.flattenedPath,\n    },\n  },\n}));\n\nexport default makeSource({\n  contentDirPath: 'posts',\n  documentTypes: [Post],\n});\n```\n\nThis will create a document type called `Post` this document is expected to be a `.md` file that lives in you `post` directory. We will use these properties for SEO. These files will have the following properties:\n\n- `title` ,`description`, and `keywords`: This will be a string pulled off from the frontmatter of your file.\n\n> **_Note: This `title` will be your `h1` so you should not use any other `h1` ’s._**\n\n- `url`: This is a string that will take the name of the file without extension.\n\n`defineDocumentType()` will define document types and `makeSource()` will convert all the content(`md`) files into data with the `Post` document type.\n\n### Add posts\n\nLet’s add some content in our blog post. Create a `post` directory and add all of your posts to it.\n\nHere is an example post, `post/what-is-contentlayer.md`\n\n```markdown\n---\ntitle: 'What is Contentlayer?'\ndescription: 'Demo description'\nkeywords: 'content, preprocessor, type-safe'\ndate: '2022-02-22'\n---\n\n**Contentlayer makes working with content easy.** It is a content preprocessor that validates and transforms your content into type-safe JSON you can easily import into your application.\n```\n\n> **_Note: It is very important to start the dev environment at this moment. This will generate a directory named `.contentlayer` this directory will have all of our content in `.json` format. it means that our content is converted to data. That’s awesome_**\n\n### Blogs page\n\nNow we need to replace the homepage(`app/page.tsx`) to this:\n\n```tsx\nimport Link from 'next/link';\nimport { allPosts } from 'contentlayer/generated';\n\nexport const metadata = {\n  title: 'Blog',\n  description:\n    'Discover insights, tips, and techniques on front-end web development. Join me on my journey to create exceptional user-friendly websites.',\n  openGraph: {\n    title: 'Blog',\n    description:\n      'Discover insights, tips, and techniques on front-end web development. Join me on my journey to create exceptional user-friendly websites.',\n    siteName: 'Sameer Jadav',\n    locale: 'en-US',\n    type: 'website',\n  },\n  twitter: {\n    title: 'Blog',\n    description:\n      'Discover insights, tips, and techniques on front-end web development. Join me on my journey to create exceptional user-friendly websites.',\n  },\n};\n\nexport default function Home() {\n  return (\n    <main className=\"p-4\">\n      <h1 className=\"mb-6 text-4xl font-bold\">Blog</h1>\n      {allPosts\n        .sort((a, b) => {\n          if (new Date(a.date) > new Date(b.date)) {\n            return -1;\n          }\n          return 1;\n        })\n        .map((post) => (\n          <Link key={post.url} href={`/blog/${post.url}`}>\n            <p className=\"text-lg\">{post.title}</p>\n          </Link>\n        ))}\n    </main>\n  );\n}\n```\n\nRember all of our post are now data, that means now we can destructure them use them as we please. Now you can see all of your blog posts.\n\nWe are importing all of our posts from `contentlayer/generated` and creating links for all the posts and sorting them through date.\n\n> Note: I am using `next: 13.1.7-canary.5` which has improved support for metadata.\n\n### Blog layout\n\nNow we will render every single blog posts in it’s own page. We need to create a slug page. Create a file like this `[slug]/page.tsx` and place the following content in it.\n\n```tsx\nimport Balancer from 'react-wrap-balancer';\nimport { allPosts } from 'contentlayer/generated';\n\nexport async function generateStaticParams() {\n  return allPosts.map((post) => ({\n    slug: post.url,\n  }));\n}\n\nexport async function generateMetadata({ params }) {\n  const post = allPosts.find((post) => post.url === params.slug);\n\n  return {\n    title: post.title,\n    description: post.description,\n    openGraph: {\n      title: post.title,\n      description: post.description,\n      siteName: 'Sameer Jadav',\n      locale: 'en-US',\n      type: 'article',\n    },\n    twitter: {\n      title: post.title,\n      description: post.description,\n    },\n  };\n}\n\nexport default async function Blog({ params }) {\n  const post = allPosts.find((post) => post.url === params.slug);\n\n  return (\n    <article>\n      <header>\n        <h1>\n          <Balancer>{post.title}</Balancer>\n        </h1>\n        <time className=\"font-mono text-gray-400\">{post.date}</time>\n      </header>\n      <section\n        className=\"prose prose-invert prose-p:text-neutral-100\"\n        dangerouslySetInnerHTML={{ __html: post.body.html }}\n      />\n    </article>\n  );\n}\n```\n\nWe are making a new object from `allPosts` which has only one property called `slug`and it is assigned to `post.url` . We are using this object to get the exact blog post that the user has requested. Then we are rendering the title and body of post.\n\nThere you have it, we have successfully created a blog app. You can design a UI and make it your own. Start writing your blog and keep learning new things\n",
      "html": "<p>Contentlayer turns your content into data. And It makes it so easy to work with <code>.md</code> and <code>.mdx</code> files. You just install contentlayer and do some configuration and you are done. you can start writing in your md/mdx files and everything works. contentlayer adds types to your data automatically, so your data is always type-safe.</p>\n<h2>Create a Next.js app</h2>\n<p>We are going to use the new <code>appDir</code> in this setup. <code>--experimental-app</code> this flag will create a Next.js app with an <code>appDir</code>. Everything in this app directory is a server component by default. when your Next app is created clean it up, and remove all the unnecessary code.</p>\n<pre><code class=\"language-bash\">npx create-next-app@latest --experimental-app\n# or\nyarn create next-app --experimental-app\n# or\npnpm create next-app --experimental-app\n</code></pre>\n<h2>Install Contentlayer</h2>\n<p>Now we need to install contentlayer and next.js plugin.</p>\n<pre><code class=\"language-bash\">npm install contentlayer next-contentlayer\n#or\nyarn add contentlayer next-contentlayer\n#or\npnpm add contentlayer next-contentlayer\n</code></pre>\n<h3>Configuration for Contentlayer</h3>\n<p>To integrate contentlayer into <code>next dev</code> and <code>next build</code> process we need to wrap <code>nextConfig</code> with <code>withContentlayer</code> method.</p>\n<pre><code class=\"language-js\">// next.config.js\n\nconst { withContentlayer } = require('next-contentlayer');\n\n/** @type {import('next').NextConfig} */\nconst nextConfig = {\n  experimental: {\n    appDir: true,\n  },\n};\n\nmodule.exports = withContentlayer(nextConfig);\n</code></pre>\n<p>Then we need to make some changes in our <code>tsconfig.json</code> or <code>jsconfig.json</code> file.</p>\n<pre><code class=\"language-ts\">{\n  \"compilerOptions\": {\n    \"baseUrl\": \".\",\n    \"paths\": {\n      \"contentlayer/generated\": [\"./.contentlayer/generated\"]\n    }\n  },\n  \"include\": [\"next-env.d.ts\", \"**/*.tsx\", \"**/*.ts\", \".contentlayer/generated\"]\n}\n</code></pre>\n<h3>Defining Post schema</h3>\n<p>Now that we have everything installed, we can begin defining our document schema. This will help contentlayer convert our content to data, which we can later use in our blog. Create a new file in root of your project called <code>contentlayer.config.js</code> and place the following content in it.</p>\n<pre><code class=\"language-js\">// contentlayer.config.js\n\nimport { defineDocumentType, makeSource } from 'contentlayer/source-files';\n\nconst Post = defineDocumentType(() => ({\n  name: 'Post',\n  filePathPattern: `**/*.md`,\n  fields: {\n    title: {\n      type: 'string',\n      required: true,\n    },\n    description: {\n      type: 'string',\n      required: true,\n    },\n    date: {\n      type: 'string',\n      required: true,\n    },\n  },\n  computedFields: {\n    url: {\n      type: 'string',\n      resolve: (doc) => doc._raw.flattenedPath,\n    },\n  },\n}));\n\nexport default makeSource({\n  contentDirPath: 'posts',\n  documentTypes: [Post],\n});\n</code></pre>\n<p>This will create a document type called <code>Post</code> this document is expected to be a <code>.md</code> file that lives in you <code>post</code> directory. We will use these properties for SEO. These files will have the following properties:</p>\n<ul>\n<li><code>title</code> ,<code>description</code>, and <code>keywords</code>: This will be a string pulled off from the frontmatter of your file.</li>\n</ul>\n<blockquote>\n<p><strong><em>Note: This <code>title</code> will be your <code>h1</code> so you should not use any other <code>h1</code> ’s.</em></strong></p>\n</blockquote>\n<ul>\n<li><code>url</code>: This is a string that will take the name of the file without extension.</li>\n</ul>\n<p><code>defineDocumentType()</code> will define document types and <code>makeSource()</code> will convert all the content(<code>md</code>) files into data with the <code>Post</code> document type.</p>\n<h3>Add posts</h3>\n<p>Let’s add some content in our blog post. Create a <code>post</code> directory and add all of your posts to it.</p>\n<p>Here is an example post, <code>post/what-is-contentlayer.md</code></p>\n<pre><code class=\"language-markdown\">---\ntitle: 'What is Contentlayer?'\ndescription: 'Demo description'\nkeywords: 'content, preprocessor, type-safe'\ndate: '2022-02-22'\n---\n\n**Contentlayer makes working with content easy.** It is a content preprocessor that validates and transforms your content into type-safe JSON you can easily import into your application.\n</code></pre>\n<blockquote>\n<p><strong><em>Note: It is very important to start the dev environment at this moment. This will generate a directory named <code>.contentlayer</code> this directory will have all of our content in <code>.json</code> format. it means that our content is converted to data. That’s awesome</em></strong></p>\n</blockquote>\n<h3>Blogs page</h3>\n<p>Now we need to replace the homepage(<code>app/page.tsx</code>) to this:</p>\n<pre><code class=\"language-tsx\">import Link from 'next/link';\nimport { allPosts } from 'contentlayer/generated';\n\nexport const metadata = {\n  title: 'Blog',\n  description:\n    'Discover insights, tips, and techniques on front-end web development. Join me on my journey to create exceptional user-friendly websites.',\n  openGraph: {\n    title: 'Blog',\n    description:\n      'Discover insights, tips, and techniques on front-end web development. Join me on my journey to create exceptional user-friendly websites.',\n    siteName: 'Sameer Jadav',\n    locale: 'en-US',\n    type: 'website',\n  },\n  twitter: {\n    title: 'Blog',\n    description:\n      'Discover insights, tips, and techniques on front-end web development. Join me on my journey to create exceptional user-friendly websites.',\n  },\n};\n\nexport default function Home() {\n  return (\n    &#x3C;main className=\"p-4\">\n      &#x3C;h1 className=\"mb-6 text-4xl font-bold\">Blog&#x3C;/h1>\n      {allPosts\n        .sort((a, b) => {\n          if (new Date(a.date) > new Date(b.date)) {\n            return -1;\n          }\n          return 1;\n        })\n        .map((post) => (\n          &#x3C;Link key={post.url} href={`/blog/${post.url}`}>\n            &#x3C;p className=\"text-lg\">{post.title}&#x3C;/p>\n          &#x3C;/Link>\n        ))}\n    &#x3C;/main>\n  );\n}\n</code></pre>\n<p>Rember all of our post are now data, that means now we can destructure them use them as we please. Now you can see all of your blog posts.</p>\n<p>We are importing all of our posts from <code>contentlayer/generated</code> and creating links for all the posts and sorting them through date.</p>\n<blockquote>\n<p>Note: I am using <code>next: 13.1.7-canary.5</code> which has improved support for metadata.</p>\n</blockquote>\n<h3>Blog layout</h3>\n<p>Now we will render every single blog posts in it’s own page. We need to create a slug page. Create a file like this <code>[slug]/page.tsx</code> and place the following content in it.</p>\n<pre><code class=\"language-tsx\">import Balancer from 'react-wrap-balancer';\nimport { allPosts } from 'contentlayer/generated';\n\nexport async function generateStaticParams() {\n  return allPosts.map((post) => ({\n    slug: post.url,\n  }));\n}\n\nexport async function generateMetadata({ params }) {\n  const post = allPosts.find((post) => post.url === params.slug);\n\n  return {\n    title: post.title,\n    description: post.description,\n    openGraph: {\n      title: post.title,\n      description: post.description,\n      siteName: 'Sameer Jadav',\n      locale: 'en-US',\n      type: 'article',\n    },\n    twitter: {\n      title: post.title,\n      description: post.description,\n    },\n  };\n}\n\nexport default async function Blog({ params }) {\n  const post = allPosts.find((post) => post.url === params.slug);\n\n  return (\n    &#x3C;article>\n      &#x3C;header>\n        &#x3C;h1>\n          &#x3C;Balancer>{post.title}&#x3C;/Balancer>\n        &#x3C;/h1>\n        &#x3C;time className=\"font-mono text-gray-400\">{post.date}&#x3C;/time>\n      &#x3C;/header>\n      &#x3C;section\n        className=\"prose prose-invert prose-p:text-neutral-100\"\n        dangerouslySetInnerHTML={{ __html: post.body.html }}\n      />\n    &#x3C;/article>\n  );\n}\n</code></pre>\n<p>We are making a new object from <code>allPosts</code> which has only one property called <code>slug</code>and it is assigned to <code>post.url</code> . We are using this object to get the exact blog post that the user has requested. Then we are rendering the title and body of post.</p>\n<p>There you have it, we have successfully created a blog app. You can design a UI and make it your own. Start writing your blog and keep learning new things</p>"
    },
    "_id": "blog-website-with-nextjs-and-contentlayer.md",
    "_raw": {
      "sourceFilePath": "blog-website-with-nextjs-and-contentlayer.md",
      "sourceFileName": "blog-website-with-nextjs-and-contentlayer.md",
      "sourceFileDir": ".",
      "contentType": "markdown",
      "flattenedPath": "blog-website-with-nextjs-and-contentlayer"
    },
    "type": "Post",
    "url": "blog-website-with-nextjs-and-contentlayer"
  }
]